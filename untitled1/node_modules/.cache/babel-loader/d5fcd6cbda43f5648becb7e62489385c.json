{"remainingRequest":"C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\src\\components\\RoleManage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\src\\components\\RoleManage.vue","mtime":1621254938000},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663663907880},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\babel-loader\\lib\\index.js","mtime":1663663908297},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663663907880},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1 - 副本\\node_modules\\vue-loader\\lib\\index.js","mtime":1663663904553}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gIkAvbmV0d29yay9yZXF1ZXN0IjsKaW1wb3J0IHsgYWRkUm9sZSwgZWRpdFJvbGUsIGdldFJvbGVzLCBnZXRQZW0sIGRlbFJvbGUgfSBmcm9tICJAL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlJvbGVNYW5hZ2UiLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGVybWlzc2lvbnM6IFtdLAogICAgICBhZGRGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGVkaXRGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIGFkZEZvcm06IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBwZXJtaXNzaW9uczogW10sCiAgICAgICAgZGVzY3JpcHRpb246ICIiCiAgICAgIH0sCiAgICAgIGVkaXRGb3JtOiB7CiAgICAgICAgaWQ6ICIiLAogICAgICAgIG5hbWU6ICIiLAogICAgICAgIHBlcm1pc3Npb25zOiBbXSwKICAgICAgICBkZXNjcmlwdGlvbjogIiIKICAgICAgfSwKICAgICAgYWRkUnVsZXM6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGVkaXRSdWxlczogewogICAgICAgIG5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXop5LoibLlkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgYWxsRGF0YTogW10sCiAgICAgIHRvdGFsOiA4LAogICAgICBwYWdlc2l6ZTogNywKICAgICAgcGFnZXNpemVzOiBbNywgMTYsIDIwXSwKICAgICAgY3VycmVudFBhZ2U6IDEKICAgIH07CiAgfSwKCiAgbWV0aG9kczogewogICAgY3VycmVudF9jaGFuZ2U6IGZ1bmN0aW9uIChjdXJyZW50UGFnZSkgewogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2U7CiAgICB9LAoKICAgIGZpbmQoKSB7CiAgICAgIGlmICh0aGlzLnNlYXJjaCA9PT0gIiIpIHsKICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMuYWxsRGF0YTsKICAgICAgICB0aGlzLnRvdGFsID0gdGhpcy50YWJsZURhdGEubGVuZ3RoOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy5hbGxEYXRhLmZpbHRlcihpID0+IHsKICAgICAgICAgIHJldHVybiBpLm5hbWUuaW5kZXhPZih0aGlzLnNlYXJjaCkgPiAtMTsKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy50b3RhbCA9IHRoaXMudGFibGVEYXRhLmxlbmd0aDsKICAgIH0sCgogICAgc2hvd0FkZCgpIHsKICAgICAgdGhpcy5hZGRGb3JtLm5hbWUgPSAiIjsKICAgICAgdGhpcy5hZGRGb3JtLmRlc2NyaXB0aW9uID0gIiI7CiAgICAgIHRoaXMuYWRkRm9ybS5wZXJtaXNzaW9ucyA9IFtdOwogICAgICB0aGlzLmFkZEZvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCgogICAgYWRkKCkgewogICAgICB0aGlzLiRyZWZzLmFkZEZvcm0udmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgICAgICB1cmw6IGFkZFJvbGUsCiAgICAgICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAiVG9rZW4iOiB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbgogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBuYW1lOiB0aGlzLmFkZEZvcm0ubmFtZSwKICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5hZGRGb3JtLmRlc2NyaXB0aW9uLAogICAgICAgICAgICAgIHBlcm1pc3Npb25zOiB0aGlzLmFkZEZvcm0ucGVybWlzc2lvbnMudG9TdHJpbmcoKQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgICAgcmVxdWVzdChjb25maWcpLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgICAgIGFsZXJ0KCLop5LoibLmt7vliqDmiJDlip8iKTsKICAgICAgICAgICAgICB0aGlzLmFsbERhdGEgPSBkYXRhLmRhdGEuZGF0YTsKICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMuYWxsRGF0YTsKICAgICAgICAgICAgICB0aGlzLnRvdGFsID0gdGhpcy50YWJsZURhdGEubGVuZ3RoOwogICAgICAgICAgICAgIHRoaXMuZmluZCgpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGFsZXJ0KGRhdGEuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgc2hvd0VkaXQocm93KSB7CiAgICAgIHRoaXMuZWRpdEZvcm0uaWQgPSByb3cuaWQ7CiAgICAgIHRoaXMuZWRpdEZvcm0ubmFtZSA9IHJvdy5uYW1lOwogICAgICB0aGlzLmVkaXRGb3JtLmRlc2NyaXB0aW9uID0gcm93LmRlc2NyaXB0aW9uOwogICAgICBjb25zb2xlLmxvZyhyb3cpOwogICAgICBjb25zdCBwZXJtaXNzaW9uID0gW107CgogICAgICBmb3IgKGxldCBpIG9mIHJvdy5wZXJtaXNzaW9ucykgewogICAgICAgIHBlcm1pc3Npb24ucHVzaChpLmlkKTsKICAgICAgfQoKICAgICAgdGhpcy5lZGl0Rm9ybS5wZXJtaXNzaW9ucyA9IHBlcm1pc3Npb247CiAgICAgIHRoaXMuZWRpdEZvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCgogICAgZWRpdCgpIHsKICAgICAgdGhpcy4kcmVmcy5lZGl0Rm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBjb25zdCByb2xlID0gewogICAgICAgICAgICBpZDogdGhpcy5lZGl0Rm9ybS5pZCwKICAgICAgICAgICAgbmFtZTogdGhpcy5lZGl0Rm9ybS5uYW1lLAogICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5lZGl0Rm9ybS5kZXNjcmlwdGlvbiwKICAgICAgICAgICAgcGVybWlzc2lvbnM6IHRoaXMuZWRpdEZvcm0ucGVybWlzc2lvbnMudG9TdHJpbmcoKQogICAgICAgICAgfTsKICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICAgICAgdXJsOiBlZGl0Um9sZSwKICAgICAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICJUb2tlbiI6IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBhcmFtczogcm9sZQogICAgICAgICAgfTsKICAgICAgICAgIHJlcXVlc3QoY29uZmlnKS50aGVuKGRhdGEgPT4gewogICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgICAgICBhbGVydCgi6KeS6Imy5L+u5pS55oiQ5YqfIik7CiAgICAgICAgICAgICAgdGhpcy5hbGxEYXRhID0gZGF0YS5kYXRhLmRhdGE7CiAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSB0aGlzLmFsbERhdGE7CiAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRoaXMudGFibGVEYXRhLmxlbmd0aDsKICAgICAgICAgICAgICB0aGlzLmZpbmQoKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhbGVydChkYXRhLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgYWxlcnQoIuacjeWKoeWZqOW8gOWwj+W3ruWVpiIpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgZGVsKHJvdykgewogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgdXJsOiBkZWxSb2xlLAogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgIlRva2VuIjogdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4KICAgICAgICB9LAogICAgICAgIHBhcmFtczogewogICAgICAgICAgImlkIjogcm93LmlkCiAgICAgICAgfQogICAgICB9OwogICAgICByZXF1ZXN0KGNvbmZpZykudGhlbihkYXRhID0+IHsKICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIGFsZXJ0KCLliKDpmaTmiJDlip8iKTsKCiAgICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMuYWxsRGF0YSkgewogICAgICAgICAgICBpZiAodGhpcy5hbGxEYXRhW2ldLmlkID09PSByb3cuaWQpIHsKICAgICAgICAgICAgICB0aGlzLmFsbERhdGEuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5maW5kKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KGRhdGEuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqGIik7CiAgICAgIH0pOwogICAgfQoKICB9LAoKICBtb3VudGVkKCkgewogICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWRtaW5Ub2tlbiIpOwoKICAgIGlmICh0b2tlbiA9PSBudWxsIHx8IHRva2VuID09PSAiIikgewogICAgICBhbGVydCgi6K+35YWI55m75b2VIik7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KCiAgICBjb25zdCBjb25maWcgPSB7CiAgICAgIHVybDogZ2V0Um9sZXMsCiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiVG9rZW4iOiB0b2tlbgogICAgICB9CiAgICB9OwogICAgcmVxdWVzdChjb25maWcpLnRoZW4oZGF0YSA9PiB7CiAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgIHRoaXMuYWxsRGF0YSA9IGRhdGEuZGF0YS5kYXRhOwogICAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy5hbGxEYXRhOwogICAgICAgIHRoaXMudG90YWwgPSB0aGlzLnRhYmxlRGF0YS5sZW5ndGg7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoZGF0YS5kYXRhLm1lc3NhZ2UpOwogICAgICB9CiAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgIGFsZXJ0KCLmnI3liqHlmajlvIDlsI/lt67kuoYiKTsKICAgIH0pOwogICAgY29uc3QgY29uZmlnMSA9IHsKICAgICAgdXJsOiBnZXRQZW0sCiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiVG9rZW4iOiB0b2tlbgogICAgICB9CiAgICB9OwogICAgcmVxdWVzdChjb25maWcxKS50aGVuKGRhdGEgPT4gewogICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICB0aGlzLnBlcm1pc3Npb25zID0gZGF0YS5kYXRhLmRhdGE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWxlcnQoZGF0YS5kYXRhLm1lc3NhZ2UpOwogICAgICB9CiAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgIGFsZXJ0KCLmnI3liqHlmajlvIDlsI/lt67kuoYiKTsKICAgIH0pOwogIH0KCn07"},{"version":3,"mappings":"AA8FA;AACA;AACA;EACAA,kBADA;;EAEAC;IACA;MACAC,eADA;MAEAC,qBAFA;MAGAC,sBAHA;MAIAC;QACAL,QADA;QAEAE,eAFA;QAGAI;MAHA,CAJA;MASAC;QACAC,MADA;QAEAR,QAFA;QAGAE,eAHA;QAIAI;MAJA,CATA;MAeAG;QACAT;UAAAU;UAAAC;UAAAC;QAAA;MADA,CAfA;MAkBAC;QACAb;UAAAU;UAAAC;UAAAC;QAAA;MADA,CAlBA;MAqBAE,aArBA;MAsBAC,UAtBA;MAuBAC,WAvBA;MAwBAC,QAxBA;MAyBAC,WAzBA;MA0BAC,sBA1BA;MA2BAC;IA3BA;EA6BA,CAhCA;;EAiCAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA;QACA;QACA;MACA,CAHA,MAIA;QACA;UACA;QACA,CAFA;MAGA;;MACA;IACA,CAfA;;IAgBAC;MACA;MACA;MACA;MACA;IACA,CArBA;;IAsBAC;MACA;QACA;UACA;YACAC,YADA;YAEAC,aAFA;YAGAC;cACA;YADA,CAHA;YAMAC;cACA7B,uBADA;cAEAM,qCAFA;cAGAJ;YAHA;UANA;UAYA4B;YACA;cACAC;cACA;cACA;cACA;cACA;YACA,CANA,MAMA;cACAA;YACA;UACA,CAVA;QAWA;MACA,CA1BA;IA2BA,CAlDA;;IAmDAC;MACA;MACA;MACA;MACAC;MACA;;MACA;QACAC;MACA;;MACA;MACA;IACA,CA9DA;;IA+DAC;MACA;QACA;UACA;YACA3B,oBADA;YAEAR,wBAFA;YAGAM,sCAHA;YAIAJ;UAJA;UAMA;YACAwB,aADA;YAEAC,aAFA;YAGAC;cACA;YADA,CAHA;YAMAC;UANA;UAQAC;YACA;cACAC;cACA;cACA;cACA;cACA;YACA,CANA,MAMA;cACAA;YACA;UACA,CAVA,EAUAK,KAVA,CAUA;YACAL;UACA,CAZA;QAaA;MACA,CA9BA;IA+BA,CA/FA;;IAgGAM;MACA;QACAX,YADA;QAEAC,aAFA;QAGAC;UACA;QADA,CAHA;QAMAC;UACA;QADA;MANA;MAUAC;QACA;UACAC;;UACA;YACA;cACA;cACA;YACA;UACA;;UACA;QACA,CATA,MASA;UACAA;QACA;MACA,CAbA,EAaAK,KAbA,CAaA;QACAL;MACA,CAfA;IAgBA;;EA3HA,CAjCA;;EA8JAO;IACA;;IACA;MACAP;MACA;IACA;;IACA;MACAL,aADA;MAEAC,aAFA;MAGAC;QACA;MADA;IAHA;IAOAE;MACA;QACA;QACA;QACA;MACA,CAJA,MAIA;QACAC;MACA;IACA,CARA,EAQAK,KARA,CAQA;MACAL;IACA,CAVA;IAWA;MACAL,WADA;MAEAC,aAFA;MAGAC;QACA;MADA;IAHA;IAOAE;MACA;QACA;MACA,CAFA,MAEA;QACAC;MACA;IACA,CANA,EAMAK,KANA,CAMA;MACAL;IACA,CARA;EASA;;AAtMA","names":["name","data","permissions","addFormVisible","editFormVisible","addForm","description","editForm","id","addRules","required","message","trigger","editRules","tableData","search","allData","total","pagesize","pagesizes","currentPage","methods","current_change","find","showAdd","add","url","method","headers","params","request","alert","showEdit","console","permission","edit","catch","del","mounted"],"sourceRoot":"src/components","sources":["RoleManage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <el-row style=\"margin-left: 14%;height: 1%;line-height: 90px\" >\r\n      <el-col :span=\"2\" style=\"text-align: right;margin-left: 3%\" >搜索：</el-col>\r\n      <el-col :span=\"5\" >\r\n        <el-input type=\"text\" v-model=\"search\" placeholder=\"角色名\" @keyup.native=\"find\"></el-input>\r\n      </el-col>\r\n      <el-col :span=\"4\" >\r\n        <el-button size=\"medium\" style=\"margin-left: 150%\" @click.native=\"showAdd\">添加角色</el-button>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog  :visible.sync=\"addFormVisible\" >\r\n      <el-form ref=\"addForm\" :model=\"addForm\" :rules=\"addRules\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item prop=\"name\"  :label-width=\"'10'\"  style=\"width: 25%;margin-left: 35%\"  >\r\n          <el-input v-model=\"addForm.name\" type=\"text\"  autocomplete=\"off\" placeholder=\"角色名\"></el-input>\r\n        </el-form-item>\r\n        <el-checkbox-group\r\n            v-model=\"addForm.permissions\" style=\"line-height: 30px\">\r\n          <el-checkbox v-for=\"pem in permissions\"   :label=\"pem.id\" :key=\"pem.id\" >{{pem.name}}</el-checkbox>\r\n        </el-checkbox-group>\r\n        <el-input style=\"width: 60%\"  maxlength=\"60\" v-model=\"addForm.description\"  type=\"textarea\" autosize autocomplete=\"off\" placeholder=\"角色描述\" ></el-input>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"add\">确 定 添 加</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog  :visible.sync=\"editFormVisible\" >\r\n      <el-form ref=\"editForm\" :model=\"editForm\" :rules=\"editRules\" label-width=\"100px\" class=\"demo-ruleForm\">\r\n        <el-form-item   :label-width=\"'10'\"  style=\"width: 25%;margin-left: 35%\"  >\r\n          <el-input v-model=\"editForm.id\" type=\"text\"  autocomplete=\"off\" placeholder=\"编号\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item  prop=\"name\" :label-width=\"'10'\"  style=\"width: 25%;margin-left: 35%\"  >\r\n          <el-input v-model=\"editForm.name\" type=\"text\"  autocomplete=\"off\" placeholder=\"角色名\" ></el-input>\r\n        </el-form-item>\r\n        <el-checkbox-group\r\n            v-model=\"editForm.permissions\" style=\"line-height: 30px\">\r\n          <el-checkbox v-for=\"pem in permissions\"  pem.id :label=\"pem.id\" :key=\"pem.id\" >{{pem.name}}</el-checkbox>\r\n        </el-checkbox-group>\r\n        <el-input style=\"width: 60%\"  maxlength=\"60\" v-model=\"editForm.description\"  type=\"textarea\" autosize autocomplete=\"off\" placeholder=\"角色描述\" ></el-input>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"edit\">保 存 修 改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-table  :data.sync=\"tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)\" style=\"width: 55%;margin-left: 20%;line-height: 30px\" border stripe>\r\n      <el-table-column prop=\"id\"\r\n                       label=\"编号\" width=\"140\"\r\n                       header-align=\"center\"\r\n                       align=\"center\"\r\n      ></el-table-column>\r\n      <el-table-column prop=\"name\"\r\n                       label=\"角色名\" width=\"180\"\r\n                       header-align=\"center\"\r\n                       align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"description\"\r\n                       label=\"描述\"\r\n                       width=\"200\"\r\n                       header-align=\"center\"\r\n                       align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column header-align=\"center\"\r\n                       align=\"center\"\r\n                       label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"showEdit(scope.row)\">编辑</el-button>\r\n          &nbsp;\r\n          <el-popconfirm\r\n              confirm-button-text='好的'\r\n              cancel-button-text='不用了'\r\n              icon=\"el-icon-info\"\r\n              icon-color=\"red\"\r\n              :title=\"'确定删除 '+scope.row.name+' 这一角色吗'\"\r\n              @confirm=\"del(scope.row)\"\r\n          >\r\n            <el-button slot=\"reference\" type=\"danger\" icon=\"el-icon-delete\" size=\"mini\" >删除</el-button>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div style=\"text-align: center;margin-top: 30px;margin-right: 30%\">\r\n      <el-pagination\r\n          background\r\n          :page-size.sync=\"pagesize\"\r\n          :page-sizes.sync=\"pagesizes\"\r\n          layout=\"sizes, prev, pager, next, jumper, ->, total\"\r\n          :total.sync=\"total\"\r\n          @current-change=\"current_change\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {request} from \"@/network/request\";\r\nimport {addRole,editRole,getRoles,getPem,delRole} from \"@/api/api\";\r\nexport default {\r\n  name: \"RoleManage\",\r\n  data(){\r\n    return {\r\n      permissions:[],\r\n      addFormVisible: false,\r\n      editFormVisible: false,\r\n      addForm:{\r\n        name:\"\",\r\n        permissions:[],\r\n        description:\"\"\r\n      },\r\n      editForm:{\r\n        id:\"\",\r\n        name:\"\",\r\n        permissions:[],\r\n        description:\"\"\r\n      },\r\n      addRules:{\r\n        name: [{required: true, message: '请输入角色名', trigger: 'blur'}],\r\n      },\r\n      editRules:{\r\n        name:[{required: true, message: '请输入角色名', trigger: 'blur'}]\r\n      },\r\n      tableData: [],\r\n      search: \"\",\r\n      allData: [],\r\n      total: 8,\r\n      pagesize:7,\r\n      pagesizes:[7,16,20],\r\n      currentPage:1\r\n    }\r\n  },\r\n  methods:{\r\n    current_change:function(currentPage){\r\n      this.currentPage = currentPage;\r\n    },\r\n    find(){\r\n      if(this.search===\"\"){\r\n        this.tableData=this.allData\r\n        this.total=this.tableData.length\r\n      }\r\n      else{\r\n        this.tableData=this.allData.filter(i=>{\r\n          return i.name.indexOf(this.search)>-1\r\n        })\r\n      }\r\n      this.total=this.tableData.length\r\n    },\r\n    showAdd(){\r\n      this.addForm.name=\"\"\r\n      this.addForm.description=\"\"\r\n      this.addForm.permissions=[]\r\n      this.addFormVisible=true\r\n    },\r\n    add(){\r\n      this.$refs.addForm.validate((valid)=>{\r\n        if(valid){\r\n          const config={\r\n            url:addRole,\r\n            method: \"get\",\r\n            headers:{\r\n              \"Token\": this.$store.state.token\r\n            },\r\n            params:{\r\n              name:this.addForm.name,\r\n              description:this.addForm.description,\r\n              permissions:this.addForm.permissions.toString()\r\n            }\r\n          }\r\n          request(config).then((data)=>{\r\n            if(data.data.code===0){\r\n              alert(\"角色添加成功\")\r\n              this.allData=data.data.data\r\n              this.tableData=this.allData\r\n              this.total=this.tableData.length\r\n              this.find()\r\n            }else{\r\n              alert(data.data.message)\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    showEdit(row){\r\n      this.editForm.id=row.id\r\n      this.editForm.name=row.name\r\n      this.editForm.description=row.description\r\n      console.log(row)\r\n      const permission=[]\r\n      for(let i of row.permissions){\r\n        permission.push(i.id)\r\n      }\r\n      this.editForm.permissions=permission\r\n      this.editFormVisible=true\r\n    },\r\n    edit(){\r\n      this.$refs.editForm.validate((valid)=>{\r\n        if(valid){\r\n          const role={\r\n            id:this.editForm.id,\r\n            name:this.editForm.name,\r\n            description:this.editForm.description,\r\n            permissions:this.editForm.permissions.toString()\r\n          }\r\n          const config={\r\n            url:editRole,\r\n            method: \"get\",\r\n            headers:{\r\n              \"Token\": this.$store.state.token\r\n            },\r\n            params:role\r\n          }\r\n          request(config).then((data)=>{\r\n            if(data.data.code===0){\r\n              alert(\"角色修改成功\")\r\n              this.allData=data.data.data\r\n              this.tableData=this.allData\r\n              this.total=this.tableData.length\r\n              this.find()\r\n            }else{\r\n              alert(data.data.message)\r\n            }\r\n          }).catch(()=>{\r\n            alert(\"服务器开小差啦\")\r\n          })\r\n        }\r\n      })\r\n    },\r\n    del(row){\r\n      const config={\r\n        url:delRole,\r\n        method: \"get\",\r\n        headers:{\r\n          \"Token\": this.$store.state.token\r\n        },\r\n        params:{\r\n          \"id\": row.id\r\n        }\r\n      }\r\n      request(config).then((data)=>{\r\n        if(data.data.code===0){\r\n          alert(\"删除成功\")\r\n          for(let i in this.allData){\r\n            if(this.allData[i].id===row.id){\r\n              this.allData.splice(i,1)\r\n              break\r\n            }\r\n          }\r\n          this.find()\r\n        }else{\r\n          alert(data.data.message)\r\n        }\r\n      }).catch(()=>{\r\n        alert(\"服务器开小差了\")\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n    const token=localStorage.getItem(\"adminToken\")\r\n    if(token==null||token===\"\"){\r\n      alert(\"请先登录\")\r\n      this.$router.push(\"/login\")\r\n    }\r\n    const config={\r\n      url: getRoles,\r\n      method: 'get',\r\n      headers: {\r\n        \"Token\": token\r\n      }\r\n    }\r\n    request(config).then((data)=>{\r\n      if(data.data.code===0){\r\n        this.allData=data.data.data\r\n        this.tableData=this.allData\r\n        this.total=this.tableData.length\r\n      }else{\r\n        alert(data.data.message)\r\n      }\r\n    }).catch(()=>{\r\n      alert(\"服务器开小差了\")\r\n    })\r\n    const config1={\r\n      url: getPem,\r\n      method: 'get',\r\n      headers: {\r\n        \"Token\": token\r\n      }\r\n    }\r\n    request(config1).then((data)=>{\r\n      if(data.data.code===0){\r\n        this.permissions=data.data.data\r\n      }else{\r\n        alert(data.data.message)\r\n      }\r\n    }).catch(()=>{\r\n      alert(\"服务器开小差了\")\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}