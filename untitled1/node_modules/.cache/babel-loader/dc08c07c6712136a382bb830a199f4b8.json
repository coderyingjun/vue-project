{"remainingRequest":"C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ying123\\Desktop\\大创\\untitled1\\src\\components\\head.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1\\src\\components\\head.vue","mtime":1675156791235},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663663907880},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\babel-loader\\lib\\index.js","mtime":1663663908297},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663663907880},{"path":"C:\\Users\\ying123\\Desktop\\大创\\untitled1\\node_modules\\vue-loader\\lib\\index.js","mtime":1663663904553}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gaW1wb3J0IHtjaGVja1Rva2VuLCBsb2dvdXQsZ2V0SW5mbywgdXBkYXRlSW5mbywgdXBkYXRlUHdkfSBmcm9tICJAL2FwaS9hcGkiCmltcG9ydCB7IGdldEluZm8sIHVwZGF0ZUluZm8sIHVwZGF0ZVB3ZCB9IGZyb20gIkAvYXBpL2FwaSI7CmltcG9ydCB7IHJlcXVlc3QgfSBmcm9tICJAL25ldHdvcmsvcmVxdWVzdCI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiSGVhZCIsCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBGb3JtMVZpc2libGU6IGZhbHNlLAogICAgICBydWxlczE6IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5aeT5ZCNJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGZvcm0xOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIG5hbWU6ICIiCiAgICAgIH0sCiAgICAgIEZvcm0yVmlzaWJsZTogZmFsc2UsCiAgICAgIHJ1bGVzMjogewogICAgICAgIG9sZFB3ZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWOn+acieWvhueggScsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBwd2Q6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmlrDlr4bnoIEnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0sCiAgICAgICAgcnB0OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YeN5aSN6L6T5YWl5paw5a+G56CBJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIGZvcm0yOiB7CiAgICAgICAgb2xkUHdkOiAiIiwKICAgICAgICBwd2Q6ICIiLAogICAgICAgIHJwdDogIiIKICAgICAgfQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzaG93VXBkYXRlKCkgewogICAgICBjb25zdCBjb25maWcgPSB7CiAgICAgICAgbWV0aG9kOiAnZ2V0JywKICAgICAgICB1cmw6IGdldEluZm8sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ1Rva2VuJzogdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4KICAgICAgICB9LAogICAgICAgIHBhcmFtczogewogICAgICAgICAgdG9rZW46IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuCiAgICAgICAgfQogICAgICB9OwogICAgICByZXF1ZXN0KGNvbmZpZykudGhlbihkYXRhID0+IHsKICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDApIHsKICAgICAgICAgIHRoaXMuZm9ybTEudXNlcm5hbWUgPSBkYXRhLmRhdGEuZGF0YS51c2VybmFtZTsKICAgICAgICAgIHRoaXMuZm9ybTEubmFtZSA9IGRhdGEuZGF0YS5kYXRhLm5hbWU7CiAgICAgICAgICB0aGlzLkZvcm0xVmlzaWJsZSA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KGRhdGEuZGF0YS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqG44CC44CC44CCIik7CiAgICAgIH0pOwogICAgfSwKCiAgICBzdWJtaXQxKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0xLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHsKICAgICAgICAgICAgdXJsOiB1cGRhdGVJbmZvLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgIlRva2VuIjogdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgbmFtZTogdGhpcy5mb3JtMS5uYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICByZXF1ZXN0KGNvbmZpZykudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgYWxlcnQoZGF0YS5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqG44CC44CC44CCIik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBzaG93VXBkYXRlUHdkKCkgewogICAgICB0aGlzLmZvcm0yLm9sZFB3ZCA9ICIiOwogICAgICB0aGlzLmZvcm0yLnB3ZCA9ICIiOwogICAgICB0aGlzLmZvcm0yLnJwdCA9ICIiOwogICAgICB0aGlzLkZvcm0yVmlzaWJsZSA9IHRydWU7CiAgICB9LAoKICAgIHN1Ym1pdDIoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybTIudmFsaWRhdGUodmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgaWYgKHRoaXMuZm9ybTIucHdkICE9PSB0aGlzLmZvcm0yLnJwdCkgewogICAgICAgICAgICBhbGVydCh0aGlzLmZvcm0yLnB3ZCArICIrIiArIHRoaXMuZm9ybTIucnB0KTsKICAgICAgICAgICAgYWxlcnQoIuWvhueggeS4jeS4gOiHtCIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc3QgY29uZmlnID0gewogICAgICAgICAgICAgIHVybDogdXBkYXRlUHdkLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICJUb2tlbiI6IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICAgIG9sZFB3ZDogdGhpcy5mb3JtMi5vbGRQd2QsCiAgICAgICAgICAgICAgICBwd2Q6IHRoaXMuZm9ybTIucHdkCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXF1ZXN0KGNvbmZpZykudGhlbihkYXRhID0+IHsKICAgICAgICAgICAgICBhbGVydChkYXRhLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqG44CC44CC44CCIik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGxvZ291dCgpIHsvLyBjb25zdCBjb25maWc9ewogICAgICAvLyAgIHVybDogbG9nb3V0LAogICAgICAvLyAgIHBhcmFtczp7CiAgICAgIC8vICAgICB0b2tlbjogdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4KICAgICAgLy8gICB9CiAgICAgIC8vIH0KICAgICAgLy8gcmVxdWVzdChjb25maWcpLnRoZW4oKCk9PnsKICAgICAgLy8gICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiYWRtaW5Ub2tlbiIpCiAgICAgIC8vICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImFkbWluTG9naW4iKQogICAgICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKQogICAgICAvLyB9KS5jYXRjaCgoKT0+ewogICAgICAvLyAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhZG1pblRva2VuIikKICAgICAgLy8gICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiYWRtaW5Mb2dpbiIpCiAgICAgIC8vICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpCiAgICAgIC8vICAgfSkKICAgIH0KCiAgfSwKCiAgYmVmb3JlQ3JlYXRlKCkgey8vIGNvbnN0IHRva2VuPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhZG1pblRva2VuIikKICAgIC8vIGlmKHRva2VuPT1udWxsfHx0b2tlbj09PSIiKXsKICAgIC8vICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpCiAgICAvLyB9ZWxzZXsKICAgIC8vICAgY29uc3QgY29uZmlnPXsKICAgIC8vICAgICB1cmw6IGNoZWNrVG9rZW4sCiAgICAvLyAgICAgcGFyYW1zOiB7CiAgICAvLyAgICAgICB0b2tlbjogdG9rZW4KICAgIC8vICAgICB9CiAgICAvLyAgIH0KICAgIC8vICAgcmVxdWVzdChjb25maWcpLnRoZW4oZGF0YT0+ewogICAgLy8gICAgIGlmKGRhdGEuZGF0YS5jb2RlIT09MCl7CiAgICAvLyAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIikKICAgIC8vICAgICB9ZWxzZXsKICAgIC8vICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgic2V0VG9rZW4iLHRva2VuKQogICAgLy8gICAgIH0KICAgIC8vICAgfSkuY2F0Y2goKCk9PnsKICAgIC8vICAgICAgIGFsZXJ0KCLmnI3liqHlmajlvIDlsI/lt67llabvvIzor7flsJ3or5Xph43mlrDnmbvlvZUiKQogICAgLy8gICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpCiAgICAvLyAgIH0pCiAgICAvLyB9CiAgfQoKfTs="},{"version":3,"mappings":"AA6CA;AACA;AACA;AACA;EACAA,YADA;;EAEAC;IACA;MACAC,mBADA;MAEAC;QACAH;UAAAI;UAAAC;UAAAC;QAAA;MADA,CAFA;MAKAC;QACAC,YADA;QAEAR;MAFA,CALA;MASAS,mBATA;MAUAC;QACAC;UAAAP;UAAAC;UAAAC;QAAA,EADA;QAEAM;UAAAR;UAAAC;UAAAC;QAAA,EAFA;QAGAO;UAAAT;UAAAC;UAAAC;QAAA;MAHA,CAVA;MAeAQ;QACAH,UADA;QAEAC,OAFA;QAGAC;MAHA;IAfA;EAqBA,CAxBA;;EAyBAE;IACAC;MACA;QACAC,aADA;QAEAC,YAFA;QAGAC;UACA;QADA,CAHA;QAMAC;UACAC;QADA;MANA;MAUAC;QACA;UACA;UACA;UACA;QACA,CAJA,MAKA;UACAC;QACA;MACA,CATA,EAUAC,KAVA,CAUA;QACAD;MACA,CAZA;IAaA,CAzBA;;IA0BAE;MACA;QACA;UACA;YACAP,eADA;YAEAC;cACA;YADA,CAFA;YAKAC;cACApB;YADA;UALA;UASAsB;YACAC;UACA,CAFA,EAGAC,KAHA,CAGA;YACAD;UACA,CALA;QAMA;MACA,CAlBA;IAmBA,CA9CA;;IA+CAG;MACA;MACA;MACA;MACA;IACA,CApDA;;IAqDAC;MACA;QACA;UACA;YACAJ;YACAA;UACA,CAHA,MAGA;YACA;cACAL,cADA;cAEAC;gBACA;cADA,CAFA;cAKAC;gBACAT,yBADA;gBAEAC;cAFA;YALA;YAUAU;cACAC;YACA,CAFA,EAGAC,KAHA,CAGA;cACAD;YACA,CALA;UAMA;QACA;MACA,CAxBA;IAyBA,CA/EA;;IAgFAK,UACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA;;EAhGA,CAzBA;;EA2HAC,gBACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACA;;AAjJA","names":["name","data","Form1Visible","rules1","required","message","trigger","form1","username","Form2Visible","rules2","oldPwd","pwd","rpt","form2","methods","showUpdate","method","url","headers","params","token","request","alert","catch","submit1","showUpdatePwd","submit2","logout","beforeCreate"],"sourceRoot":"src/components","sources":["head.vue"],"sourcesContent":["<template>\r\n  <div style=\"line-height: 45px\">\r\n    <el-dropdown>\r\n  <span class=\"el-dropdown-link\" >\r\n    我的<i class=\"el-icon-arrow-down el-icon--right\"></i>\r\n  </span>\r\n      <el-dropdown-menu slot=\"dropdown\">\r\n        <el-dropdown-item @click.native=\"showUpdate\">修改个人信息</el-dropdown-item>\r\n        <el-dropdown-item @click.native=\"showUpdatePwd\">修改密码</el-dropdown-item>\r\n        <el-dropdown-item @click.native=\"logout\">登出</el-dropdown-item>\r\n      </el-dropdown-menu>\r\n    </el-dropdown>\r\n    <el-dialog title=\"个人信息修改\" :visible.sync=\"Form1Visible\" >\r\n      <el-form ref=\"form1\" :model=\"form1\" :rules=\"rules1\">\r\n        <el-form-item label=\"用户名\" prop=\"username\" :label-width=\"'10'\" style=\"margin-left: 40%;width: 30%\">\r\n          <el-input v-model=\"form1.username\"  autocomplete=\"off\" disabled ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"姓名\" prop=\"name\"  :label-width=\"'10'\" style=\"margin-left: 40%;width: 30%\">\r\n          <el-input v-model=\"form1.name\"  autocomplete=\"off\" ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submit1\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"修改密码\" :visible.sync=\"Form2Visible\" >\r\n      <el-form ref=\"form2\" :model=\"form2\" :rules=\"rules2\">\r\n        <el-form-item label=\"旧密码\" prop=\"oldPwd\" :label-width=\"'10'\" style=\"margin-left: 40%;width: 30%\">\r\n          <el-input v-model=\"form2.oldPwd\" type=\"password\"  autocomplete=\"off\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"新密码\" prop=\"pwd\" :label-width=\"'10'\" style=\"margin-left: 40%;width: 30%\">\r\n          <el-input v-model=\"form2.pwd\"  type=\"password\" autocomplete=\"off\" ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"确认密码\" prop=\"rpt\" :label-width=\"'10'\" style=\"margin-left: 40%;width: 30%\">\r\n          <el-input v-model=\"form2.rpt\" type=\"password\" autocomplete=\"off\" ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"submit2\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import {checkToken, logout,getInfo, updateInfo, updatePwd} from \"@/api/api\"\r\nimport {getInfo, updateInfo, updatePwd} from \"@/api/api\"\r\nimport {request} from \"@/network/request\"\r\nexport default {\r\n  name: \"Head\",\r\n  data(){\r\n    return {\r\n      Form1Visible: false,\r\n      rules1:{\r\n        name: [{required: true, message: '请输入姓名', trigger: 'blur'}]\r\n      },\r\n      form1:{\r\n        username: \"\",\r\n        name:\"\",\r\n      },\r\n      Form2Visible: false,\r\n      rules2:{\r\n        oldPwd: [{required: true, message: '请输入原有密码', trigger: 'blur'}],\r\n        pwd: [{required: true, message: '请输入新密码', trigger: 'blur'}],\r\n        rpt: [{required: true, message: '请重复输入新密码', trigger: 'blur'}]\r\n      },\r\n      form2:{\r\n        oldPwd: \"\",\r\n        pwd:\"\",\r\n        rpt:\"\"\r\n      }\r\n    }\r\n  },\r\n  methods:{\r\n    showUpdate(){\r\n      const config={\r\n        method:'get',\r\n        url: getInfo,\r\n        headers: {\r\n          'Token': this.$store.state.token,\r\n        },\r\n        params: {\r\n          token: this.$store.state.token\r\n        }\r\n      }\r\n      request(config).then((data)=>{\r\n        if(data.data.code===0){\r\n          this.form1.username=data.data.data.username\r\n          this.form1.name=data.data.data.name\r\n          this.Form1Visible=true\r\n        }\r\n        else{\r\n          alert(data.data.message)\r\n        }\r\n      }\r\n      ).catch(()=>{\r\n        alert(\"服务器开小差了。。。\")\r\n      })\r\n    },\r\n    submit1(){\r\n      this.$refs.form1.validate((valid) => {\r\n        if(valid) {\r\n          const config = {\r\n            url: updateInfo,\r\n            headers: {\r\n              \"Token\": this.$store.state.token\r\n            },\r\n            params: {\r\n              name: this.form1.name\r\n            }\r\n          }\r\n          request(config).then((data) => {\r\n                alert(data.data.message)\r\n              }\r\n          ).catch(() => {\r\n            alert(\"服务器开小差了。。。\")\r\n          })\r\n        }\r\n      })\r\n    },\r\n    showUpdatePwd(){\r\n      this.form2.oldPwd=\"\"\r\n      this.form2.pwd=\"\"\r\n      this.form2.rpt=\"\"\r\n      this.Form2Visible=true\r\n    },\r\n    submit2(){\r\n      this.$refs.form2.validate((valid) => {\r\n        if(valid) {\r\n          if(this.form2.pwd!==this.form2.rpt){\r\n            alert(this.form2.pwd+\"+\"+this.form2.rpt)\r\n            alert(\"密码不一致\")\r\n          }else {\r\n            const config = {\r\n              url: updatePwd,\r\n              headers: {\r\n                \"Token\": this.$store.state.token\r\n              },\r\n              params: {\r\n                oldPwd: this.form2.oldPwd,\r\n                pwd:this.form2.pwd\r\n              }\r\n            }\r\n            request(config).then((data) => {\r\n                  alert(data.data.message)\r\n                }\r\n            ).catch(() => {\r\n              alert(\"服务器开小差了。。。\")\r\n            })\r\n          }\r\n        }\r\n      })\r\n    },\r\n    logout(){\r\n      // const config={\r\n      //   url: logout,\r\n      //   params:{\r\n      //     token: this.$store.state.token\r\n      //   }\r\n      // }\r\n      // request(config).then(()=>{\r\n      //   localStorage.removeItem(\"adminToken\")\r\n      //   localStorage.removeItem(\"adminLogin\")\r\n      //   this.$router.push(\"/login\")\r\n      // }).catch(()=>{\r\n      //   localStorage.removeItem(\"adminToken\")\r\n      //   localStorage.removeItem(\"adminLogin\")\r\n      //   this.$router.push(\"/login\")\r\n      //   })\r\n      }\r\n  },\r\n  beforeCreate() {\r\n    // const token=localStorage.getItem(\"adminToken\")\r\n    // if(token==null||token===\"\"){\r\n    //   this.$router.push(\"/login\")\r\n    // }else{\r\n    //   const config={\r\n    //     url: checkToken,\r\n    //     params: {\r\n    //       token: token\r\n    //     }\r\n    //   }\r\n    //   request(config).then(data=>{\r\n    //     if(data.data.code!==0){\r\n    //       this.$router.push(\"/login\")\r\n    //     }else{\r\n    //       this.$store.commit(\"setToken\",token)\r\n    //     }\r\n    //   }).catch(()=>{\r\n    //       alert(\"服务器开小差啦，请尝试重新登录\")\r\n    //       this.$router.push(\"/login\")\r\n    //   })\r\n    // }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-dropdown-link {\r\n  cursor: pointer;\r\n  color: black;\r\n}\r\n.el-icon-arrow-down {\r\n  font-size: 12px;\r\n}\r\n</style>"]}]}