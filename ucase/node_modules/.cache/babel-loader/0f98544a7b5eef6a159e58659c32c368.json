{"remainingRequest":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\src\\components\\MySearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\src\\components\\MySearch.vue","mtime":1621943302000},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678861295872},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\babel-loader\\lib\\index.js","mtime":1678861299420},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678861295872},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0U3ViamVjdHMsIGdldEtpbmRzIH0gZnJvbSAnQC9hcGkvYXBpJzsKaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gIkAvbmV0d29yay9yZXF1ZXN0IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJNeVNlYXJjaCIsCiAgcHJvcHM6IHsKICAgIHBFdmVudDogU3RyaW5nCiAgfSwKICBtZXRob2RzOiB7CiAgICB0b1NlYXJjaCgpIHsKICAgICAgdGhpcy4kZW1pdCgnc2VhcmNoJywgewogICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICB2YWx1ZTogdGhpcy5zZWFyY2gKICAgICAgfSk7CiAgICB9CgogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAidGl0bGUiLAogICAgICBzZWFyY2g6ICIiLAogICAgICBzdWJqZWN0czogdGhpcy4kc3RvcmUuc3RhdGUuZmllbGRzLAogICAgICBraW5kczogdGhpcy4kc3RvcmUuc3RhdGUua2luZHMKICAgIH07CiAgfSwKCiAgYmVmb3JlQ3JlYXRlKCkgewogICAgLy/ojrflj5bnsbvliKsKICAgIGNvbnN0IGNvbmZpZzAgPSB7CiAgICAgIHVybDogZ2V0S2luZHMsCiAgICAgIG1ldGhvZDogJ2dldCcKICAgIH07CiAgICByZXF1ZXN0KGNvbmZpZzApLnRoZW4oZGF0YSA9PiB7CiAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgIHRoaXMua2luZHMgPSBbXTsKCiAgICAgICAgZm9yIChsZXQgaSBvZiBkYXRhLmRhdGEuZGF0YSkgewogICAgICAgICAgY29uc3QgY2xhc3MwID0gewogICAgICAgICAgICB2YWx1ZTogaS5pZCwKICAgICAgICAgICAgbGFiZWw6IGkubmFtZQogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMua2luZHMucHVzaChjbGFzczApOwogICAgICAgIH0KCiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRLaW5kcycsIHRoaXMua2luZHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCLojrflj5bnsbvliKvlpLHotKXvvIzor7fliLfmlrDph43or5UiKTsKICAgICAgfQogICAgfSkuY2F0Y2goKCkgPT4gewogICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqG77yM6K+35Yi35paw6YeN6K+VIik7CiAgICB9KTsKICAgIGNvbnN0IGNvbmZpZzEgPSB7CiAgICAgIHVybDogZ2V0U3ViamVjdHMsCiAgICAgIG1ldGhvZDogJ2dldCcKICAgIH07CiAgICByZXF1ZXN0KGNvbmZpZzEpLnRoZW4oZGF0YSA9PiB7CiAgICAgIHRoaXMuc3ViamVjdHMgPSBbXTsKCiAgICAgIGlmIChkYXRhLmRhdGEuY29kZSA9PT0gMCkgewogICAgICAgIGZvciAobGV0IGkgb2YgZGF0YS5kYXRhLmRhdGEpIHsKICAgICAgICAgIGNvbnN0IHN1YmplY3QgPSB7CiAgICAgICAgICAgIHZhbHVlOiBpLmlkLAogICAgICAgICAgICBsYWJlbDogaS5uYW1lLAogICAgICAgICAgICBjaGlsZHJlbjogW10KICAgICAgICAgIH07CgogICAgICAgICAgZm9yIChsZXQgaiBvZiBpLnN1YmplY3RzKSB7CiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gewogICAgICAgICAgICAgIHZhbHVlOiBqLmlkLAogICAgICAgICAgICAgIGxhYmVsOiBqLm5hbWUKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3ViamVjdC5jaGlsZHJlbi5wdXNoKGNoaWxkKTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnN1YmplY3RzLnB1c2goc3ViamVjdCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEZpZWxkcycsIHRoaXMuc3ViamVjdHMpOwogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCLojrflj5blrabnp5HlpLHotKXvvIzor7fliLfmlrDph43or5UiKTsKICAgICAgfQogICAgfSkuY2F0Y2goKCkgPT4gewogICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqG77yM6K+35Yi35paw6YeN6K+VIik7CiAgICB9KTsKICB9LAoKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuJHJvdXRlLnBhdGguaW5kZXhPZigic2VhcmNoIikgPiAtMSkgewogICAgICB0aGlzLnR5cGUgPSB0aGlzLiRyb3V0ZS5wYXJhbXMudHlwZTsKCiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICJzdWJqZWN0IikgewogICAgICAgIHRoaXMuc2VhcmNoID0gdGhpcy4kcm91dGUucGFyYW1zLnNlYXJjaC5zcGxpdCgiLCIpOwogICAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gImtpbmQiKSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSBbdGhpcy4kcm91dGUucGFyYW1zLnNlYXJjaF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWFyY2ggPSB0aGlzLiRyb3V0ZS5wYXJhbXMuc2VhcmNoOwogICAgICB9CiAgICB9CiAgfQoKfTs="},{"version":3,"sources":["MySearch.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div style=\"width:500px;margin-top:-50px;margin-left:480px;height: 100px\">\r\n    <div v-if=\"type==='subject'\" style=\"height: 100px\">\r\n      <el-select  v-model=\"type\" @change=\"search=''\" placeholder=\"请选择\" style=\"height:100px;width:100px\">\r\n        <el-option label=\"标题\" value=\"title\"></el-option>\r\n        <el-option label=\"作者\" value=\"author\"></el-option>\r\n        <el-option label=\"关键词\" value=\"keywords\"></el-option>\r\n        <el-option label=\"学科\" value=\"subject\" ></el-option>\r\n        <el-option label=\"类别\" value=\"kind\" ></el-option>\r\n      </el-select>\r\n      <el-cascader :options=\"subjects\"\r\n                   :props=\"{ checkStrictly: true }\"\r\n                   v-model=\"search\"\r\n                   filterable\r\n                   clearable class=\"input-with-select\">\r\n      </el-cascader>\r\n      <el-button  icon=\"el-icon-search\" @click=\"toSearch\"></el-button>\r\n    </div>\r\n    <div v-else-if=\"type==='kind'\" style=\"height: 100px\">\r\n      <el-select v-model=\"type\"  placeholder=\"请选择\" @change=\"search=''\" style=\"height:100px;width: 100px\">\r\n        <el-option label=\"标题\" value=\"title\"></el-option>\r\n        <el-option label=\"作者\" value=\"author\"></el-option>\r\n        <el-option label=\"关键词\" value=\"keywords\"></el-option>\r\n        <el-option label=\"学科\" value=\"subject\" @select=\"search=''\"></el-option>\r\n        <el-option label=\"类别\" value=\"kind\" @select=\"search=''\"></el-option>\r\n      </el-select>\r\n      <el-select v-model=\"search\" placeholder=\"请选择\" style=\"height:100px;\">\r\n        <el-option v-for=\"item in kinds\"\r\n                   :key=\"item.value\"\r\n                   :label=\"item.label\"\r\n                   :value=\"item.value\"></el-option>\r\n      </el-select>\r\n      <el-button  icon=\"el-icon-search\" @click=\"toSearch\" ></el-button>\r\n    </div>\r\n    <div v-else>\r\n      <el-input placeholder=\"请输入搜索内容\" v-model=\"search\" class=\"input-with-select\">\r\n        <el-select v-model=\"type\" slot=\"prepend\" @change=\"search=''\" placeholder=\"请选择\" style=\"width: 90px\">\r\n          <el-option label=\"标题\" value=\"title\"></el-option>\r\n          <el-option label=\"作者\" value=\"author\"></el-option>\r\n          <el-option label=\"关键词\" value=\"keywords\"></el-option>\r\n          <el-option label=\"学科\" value=\"subject\" ></el-option>\r\n          <el-option label=\"类别\" value=\"kind\" ></el-option>\r\n        </el-select>\r\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"toSearch\"></el-button>\r\n      </el-input>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getSubjects,getKinds} from '@/api/api'\r\nimport {request} from \"@/network/request\"\r\nexport default {\r\n  name: \"MySearch\",\r\n  props: {\r\n    pEvent: String,\r\n  },\r\n    methods: {\r\n      toSearch() {\r\n        this.$emit('search', {type: this.type, value: this.search})\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        type:\"title\",\r\n        search:\"\",\r\n        subjects: this.$store.state.fields,\r\n        kinds: this.$store.state.kinds\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      //获取类别\r\n      const config0 = {\r\n        url: getKinds,\r\n        method: 'get'\r\n      }\r\n      request(config0).then((data) => {\r\n        if (data.data.code === 0) {\r\n          this.kinds = []\r\n          for (let i of data.data.data) {\r\n            const class0 = {value: i.id, label: i.name}\r\n            this.kinds.push(class0)\r\n          }\r\n          this.$store.commit('setKinds', this.kinds)\r\n        } else {\r\n          alert(\"获取类别失败，请刷新重试\")\r\n        }\r\n      }).catch(() => {\r\n        alert(\"服务器开小差了，请刷新重试\")\r\n      })\r\n      const config1 = {\r\n        url: getSubjects,\r\n        method: 'get'\r\n      }\r\n      request(config1).then((data) => {\r\n        this.subjects = []\r\n        if (data.data.code === 0) {\r\n          for (let i of data.data.data) {\r\n            const subject = {\r\n              value: i.id,\r\n              label: i.name,\r\n              children: []\r\n            }\r\n            for (let j of i.subjects) {\r\n              const child = {\r\n                value: j.id,\r\n                label: j.name\r\n              }\r\n              subject.children.push(child)\r\n            }\r\n            this.subjects.push(subject)\r\n          }\r\n          this.$store.commit('setFields', this.subjects)\r\n        } else {\r\n          alert(\"获取学科失败，请刷新重试\")\r\n        }\r\n      }).catch(() => {\r\n        alert(\"服务器开小差了，请刷新重试\")\r\n      })\r\n    },\r\n    mounted() {\r\n      if(this.$route.path.indexOf(\"search\")>-1){\r\n        this.type=this.$route.params.type\r\n        if(this.type===\"subject\"){\r\n          this.search=this.$route.params.search.split(\",\")\r\n        }else if(this.type===\"kind\"){\r\n          this.search=[this.$route.params.search]\r\n        }else{\r\n          this.search=this.$route.params.search\r\n        }\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-main[data-v-5c886d6e]{\r\n  line-height: 100px;\r\n}\r\n.el-select .el-input {\r\n  width: 130px;\r\n}\r\n.input-with-select .el-input-group__prepend {\r\n  background-color: #fff;\r\n}\r\n\r\n</style>"],"sourceRoot":"src/components"}]}