{"remainingRequest":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\src\\components\\MyCollection.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\src\\components\\MyCollection.vue","mtime":1621956668000},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678861295872},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\babel-loader\\lib\\index.js","mtime":1678861299420},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678861295872},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge3JlcXVlc3R9IGZyb20gIkAvbmV0d29yay9yZXF1ZXN0IjsNCmltcG9ydCB7Y2FuY2xlQ29sbGVjdCwgZ2V0TXljb2xsZWN0aW9ufSBmcm9tICJAL2FwaS9hcGkiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTXlDb2xsZWN0aW9uIiwNCiAgbWV0aG9kczp7DQogICAgY3VycmVudF9jaGFuZ2U6ZnVuY3Rpb24oY3VycmVudFBhZ2Upew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IGN1cnJlbnRQYWdlOw0KICAgIH0sDQogICAgdG9DYXNlZGV0YWlsKGlkKXsNCiAgICAgIGxldCByb3V0ZVVybCA9IHRoaXMuJHJvdXRlci5yZXNvbHZlKHsNCiAgICAgICAgcGF0aDogIi9jYXNlZGV0YWlsIiwNCiAgICAgICAgcXVlcnk6IHtpZDppZH0NCiAgICAgIH0pOw0KICAgICAgd2luZG93Lm9wZW4ocm91dGVVcmwuaHJlZiwgJ19ibGFuaycpDQogICAgfSwNCiAgICBjYW5jbGUocm93KXsNCiAgICAgIGNvbnN0IGNvbmZpZz17DQogICAgICAgIHVybDogY2FuY2xlQ29sbGVjdCwNCiAgICAgICAgbWV0aG9kOiAnZ2V0JywNCiAgICAgICAgaGVhZGVyczp7DQogICAgICAgICAgIlRva2VuIjp0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbg0KICAgICAgICB9LA0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgICdjaWQnOnJvdy5pZA0KICAgICAgICB9DQogICAgfQ0KICAgIHJlcXVlc3QoY29uZmlnKS50aGVuKChkYXRhKT0+ew0KICAgICAgICBpZihkYXRhLmRhdGEuY29kZT09PTApew0KICAgICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy50YWJsZURhdGEpIHsNCiAgICAgICAgICAgIGlmICh0aGlzLnRhYmxlRGF0YVtpXS5pZCA9PT0gcm93LmlkKSB7DQogICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnNwbGljZShpLDEpDQogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgiZGVsQ29sbGVjdCIscm93LmlkKQ0KDQogICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICB0aXRsZTogJ3RpcCcsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5pS26JePJywNCiAgICAgICAgICAgIGR1cmF0aW9uOiAyMDAwDQogICAgICAgICAgfSk7DQogICAgICAgIH1lbHNlew0KICAgICAgICAgIGFsZXJ0KGRhdGEuZGF0YS5tZXNzYWdlKQ0KICAgICAgICB9DQogICAgICB9KS5jYXRjaCgoKT0+ew0KICAgICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqGIikNCiAgICB9KQ0KICAgIH0NCiAgfSwNCiAgZGF0YSgpew0KICAgIHJldHVybiB7DQogICAgICB0YWJsZURhdGE6W10sDQogICAgICBhbGxEYXRhOltdLA0KICAgICAgdG90YWw6IDAsDQogICAgICBwYWdlc2l6ZTogNywNCiAgICAgIHBhZ2VzaXplczpbNywxNiwyMF0sDQogICAgICBjdXJyZW50UGFnZToxDQogICAgfQ0KICB9LG1vdW50ZWQoKSB7DQogICAgbGV0IHRva2VuPWxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1VG9rZW4iKQ0KICAgIGNvbnN0IGNvbmZpZz17DQogICAgICB1cmw6IGdldE15Y29sbGVjdGlvbiwNCiAgICAgIG1ldGhvZDogJ2dldCcsDQogICAgICBoZWFkZXJzOiB7DQogICAgICAgICdUb2tlbic6dG9rZW4NCiAgICAgIH0NCiAgICB9DQogICAgcmVxdWVzdChjb25maWcpLnRoZW4oKGRhdGEpPT57DQogICAgICBpZihkYXRhLmRhdGEuY29kZT09PTApew0KICAgICAgICB0aGlzLnRhYmxlRGF0YT1kYXRhLmRhdGEuZGF0YQ0KICAgICAgICB0aGlzLnRvdGFsPWRhdGEuZGF0YS5kYXRhLmxlbmd0aA0KICAgICAgfWVsc2V7DQogICAgICAgIGFsZXJ0KGRhdGEuZGF0YS5tZXNzYWdlKQ0KICAgICAgfQ0KICAgIH0pLmNhdGNoKCgpPT57DQogICAgICBhbGVydCgi5pyN5Yqh5Zmo5byA5bCP5beu5LqGIikNCiAgICB9KQ0KICB9DQp9DQo="},{"version":3,"sources":["MyCollection.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyCollection.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <h1 style=\"margin-top: 25px\">个人收藏</h1>\r\n    <el-table  :data.sync=\"tableData.slice((currentPage-1)*pagesize,currentPage*pagesize)\"\r\n               style=\"margin-left:20%;width: 70%;margin-top: 30px\" border stripe\r\n    ><el-table-column\r\n        label=\"标题\"\r\n        width=\"250\"\r\n        header-align=\"center\"\r\n        align=\"center\">\r\n      <template slot-scope=\"scope\">\r\n        <el-link  @click=\"toCasedetail(scope.row.id)\">{{ scope.row.title }}</el-link >\r\n      </template>\r\n    </el-table-column>\r\n      <el-table-column prop=\"fname\"\r\n                       label=\"学科门类\" width=\"120\"\r\n                       header-align=\"center\"\r\n                       align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column prop=\"sname\"\r\n                       label=\"学科\"\r\n                       width=\"120\"\r\n                       header-align=\"center\"\r\n                       align=\"center\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"kname\"\r\n                       label=\"类别\"\r\n                       width=\"120\"\r\n                       header-align=\"center\"\r\n                       align=\"center\"\r\n                       >\r\n      </el-table-column>\r\n      <el-table-column prop=\"author\"\r\n                       label=\"作者\"\r\n                       width=\"120\"\r\n                       header-align=\"center\"\r\n                       align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column prop=\"checkerName\"\r\n                       label=\"审核人员\"\r\n                       width=\"120\"\r\n                       header-align=\"center\"\r\n                       align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column header-align=\"center\"\r\n                       align=\"center\"\r\n                       label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"warning\" icon=\"el-icon-star-on\"  circle title=\"取消收藏\" @click.prevent=\"cancle(scope.row)\"></el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div style=\"text-align: center;margin-top: 30px;margin-right: 30%\">\r\n      <el-pagination\r\n          background\r\n          :page-size.sync=\"pagesize\"\r\n          :page-sizes.sync=\"pagesizes\"\r\n          layout=\"sizes, prev, pager, next, jumper, ->, total\"\r\n          :total.sync=\"total\"\r\n          @current-change=\"current_change\">\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {request} from \"@/network/request\";\r\nimport {cancleCollect, getMycollection} from \"@/api/api\";\r\nexport default {\r\n  name: \"MyCollection\",\r\n  methods:{\r\n    current_change:function(currentPage){\r\n      this.currentPage = currentPage;\r\n    },\r\n    toCasedetail(id){\r\n      let routeUrl = this.$router.resolve({\r\n        path: \"/casedetail\",\r\n        query: {id:id}\r\n      });\r\n      window.open(routeUrl.href, '_blank')\r\n    },\r\n    cancle(row){\r\n      const config={\r\n        url: cancleCollect,\r\n        method: 'get',\r\n        headers:{\r\n          \"Token\":this.$store.state.token\r\n        },\r\n        params:{\r\n          'cid':row.id\r\n        }\r\n    }\r\n    request(config).then((data)=>{\r\n        if(data.data.code===0){\r\n          for (let i in this.tableData) {\r\n            if (this.tableData[i].id === row.id) {\r\n              this.tableData.splice(i,1)\r\n              this.$store.commit(\"delCollect\",row.id)\r\n\r\n              break\r\n            }\r\n          }\r\n          this.$notify({\r\n            title: 'tip',\r\n            message: '取消收藏',\r\n            duration: 2000\r\n          });\r\n        }else{\r\n          alert(data.data.message)\r\n        }\r\n      }).catch(()=>{\r\n        alert(\"服务器开小差了\")\r\n    })\r\n    }\r\n  },\r\n  data(){\r\n    return {\r\n      tableData:[],\r\n      allData:[],\r\n      total: 0,\r\n      pagesize: 7,\r\n      pagesizes:[7,16,20],\r\n      currentPage:1\r\n    }\r\n  },mounted() {\r\n    let token=localStorage.getItem(\"uToken\")\r\n    const config={\r\n      url: getMycollection,\r\n      method: 'get',\r\n      headers: {\r\n        'Token':token\r\n      }\r\n    }\r\n    request(config).then((data)=>{\r\n      if(data.data.code===0){\r\n        this.tableData=data.data.data\r\n        this.total=data.data.data.length\r\n      }else{\r\n        alert(data.data.message)\r\n      }\r\n    }).catch(()=>{\r\n      alert(\"服务器开小差了\")\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}