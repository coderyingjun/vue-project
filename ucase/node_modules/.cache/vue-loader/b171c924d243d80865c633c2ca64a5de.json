{"remainingRequest":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\src\\components\\MySearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\src\\components\\MySearch.vue","mtime":1621943302000},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678861295872},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\babel-loader\\lib\\index.js","mtime":1678861299420},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678861295872},{"path":"C:\\Users\\ying123\\Desktop\\大创\\vue_project\\ucase\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2dldFN1YmplY3RzLGdldEtpbmRzfSBmcm9tICdAL2FwaS9hcGknDQppbXBvcnQge3JlcXVlc3R9IGZyb20gIkAvbmV0d29yay9yZXF1ZXN0Ig0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiTXlTZWFyY2giLA0KICBwcm9wczogew0KICAgIHBFdmVudDogU3RyaW5nLA0KICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgIHRvU2VhcmNoKCkgew0KICAgICAgICB0aGlzLiRlbWl0KCdzZWFyY2gnLCB7dHlwZTogdGhpcy50eXBlLCB2YWx1ZTogdGhpcy5zZWFyY2h9KQ0KICAgICAgfQ0KICAgIH0sDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIHR5cGU6InRpdGxlIiwNCiAgICAgICAgc2VhcmNoOiIiLA0KICAgICAgICBzdWJqZWN0czogdGhpcy4kc3RvcmUuc3RhdGUuZmllbGRzLA0KICAgICAgICBraW5kczogdGhpcy4kc3RvcmUuc3RhdGUua2luZHMNCiAgICAgIH0NCiAgICB9LA0KICAgIGJlZm9yZUNyZWF0ZSgpIHsNCiAgICAgIC8v6I635Y+W57G75YirDQogICAgICBjb25zdCBjb25maWcwID0gew0KICAgICAgICB1cmw6IGdldEtpbmRzLA0KICAgICAgICBtZXRob2Q6ICdnZXQnDQogICAgICB9DQogICAgICByZXF1ZXN0KGNvbmZpZzApLnRoZW4oKGRhdGEpID0+IHsNCiAgICAgICAgaWYgKGRhdGEuZGF0YS5jb2RlID09PSAwKSB7DQogICAgICAgICAgdGhpcy5raW5kcyA9IFtdDQogICAgICAgICAgZm9yIChsZXQgaSBvZiBkYXRhLmRhdGEuZGF0YSkgew0KICAgICAgICAgICAgY29uc3QgY2xhc3MwID0ge3ZhbHVlOiBpLmlkLCBsYWJlbDogaS5uYW1lfQ0KICAgICAgICAgICAgdGhpcy5raW5kcy5wdXNoKGNsYXNzMCkNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRLaW5kcycsIHRoaXMua2luZHMpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxlcnQoIuiOt+WPluexu+WIq+Wksei0pe+8jOivt+WIt+aWsOmHjeivlSIpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgYWxlcnQoIuacjeWKoeWZqOW8gOWwj+W3ruS6hu+8jOivt+WIt+aWsOmHjeivlSIpDQogICAgICB9KQ0KICAgICAgY29uc3QgY29uZmlnMSA9IHsNCiAgICAgICAgdXJsOiBnZXRTdWJqZWN0cywNCiAgICAgICAgbWV0aG9kOiAnZ2V0Jw0KICAgICAgfQ0KICAgICAgcmVxdWVzdChjb25maWcxKS50aGVuKChkYXRhKSA9PiB7DQogICAgICAgIHRoaXMuc3ViamVjdHMgPSBbXQ0KICAgICAgICBpZiAoZGF0YS5kYXRhLmNvZGUgPT09IDApIHsNCiAgICAgICAgICBmb3IgKGxldCBpIG9mIGRhdGEuZGF0YS5kYXRhKSB7DQogICAgICAgICAgICBjb25zdCBzdWJqZWN0ID0gew0KICAgICAgICAgICAgICB2YWx1ZTogaS5pZCwNCiAgICAgICAgICAgICAgbGFiZWw6IGkubmFtZSwNCiAgICAgICAgICAgICAgY2hpbGRyZW46IFtdDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGxldCBqIG9mIGkuc3ViamVjdHMpIHsNCiAgICAgICAgICAgICAgY29uc3QgY2hpbGQgPSB7DQogICAgICAgICAgICAgICAgdmFsdWU6IGouaWQsDQogICAgICAgICAgICAgICAgbGFiZWw6IGoubmFtZQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIHN1YmplY3QuY2hpbGRyZW4ucHVzaChjaGlsZCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMuc3ViamVjdHMucHVzaChzdWJqZWN0KQ0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEZpZWxkcycsIHRoaXMuc3ViamVjdHMpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgYWxlcnQoIuiOt+WPluWtpuenkeWksei0pe+8jOivt+WIt+aWsOmHjeivlSIpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgYWxlcnQoIuacjeWKoeWZqOW8gOWwj+W3ruS6hu+8jOivt+WIt+aWsOmHjeivlSIpDQogICAgICB9KQ0KICAgIH0sDQogICAgbW91bnRlZCgpIHsNCiAgICAgIGlmKHRoaXMuJHJvdXRlLnBhdGguaW5kZXhPZigic2VhcmNoIik+LTEpew0KICAgICAgICB0aGlzLnR5cGU9dGhpcy4kcm91dGUucGFyYW1zLnR5cGUNCiAgICAgICAgaWYodGhpcy50eXBlPT09InN1YmplY3QiKXsNCiAgICAgICAgICB0aGlzLnNlYXJjaD10aGlzLiRyb3V0ZS5wYXJhbXMuc2VhcmNoLnNwbGl0KCIsIikNCiAgICAgICAgfWVsc2UgaWYodGhpcy50eXBlPT09ImtpbmQiKXsNCiAgICAgICAgICB0aGlzLnNlYXJjaD1bdGhpcy4kcm91dGUucGFyYW1zLnNlYXJjaF0NCiAgICAgICAgfWVsc2V7DQogICAgICAgICAgdGhpcy5zZWFyY2g9dGhpcy4kcm91dGUucGFyYW1zLnNlYXJjaA0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["MySearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MySearch.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div style=\"width:500px;margin-top:-50px;margin-left:480px;height: 100px\">\r\n    <div v-if=\"type==='subject'\" style=\"height: 100px\">\r\n      <el-select  v-model=\"type\" @change=\"search=''\" placeholder=\"请选择\" style=\"height:100px;width:100px\">\r\n        <el-option label=\"标题\" value=\"title\"></el-option>\r\n        <el-option label=\"作者\" value=\"author\"></el-option>\r\n        <el-option label=\"关键词\" value=\"keywords\"></el-option>\r\n        <el-option label=\"学科\" value=\"subject\" ></el-option>\r\n        <el-option label=\"类别\" value=\"kind\" ></el-option>\r\n      </el-select>\r\n      <el-cascader :options=\"subjects\"\r\n                   :props=\"{ checkStrictly: true }\"\r\n                   v-model=\"search\"\r\n                   filterable\r\n                   clearable class=\"input-with-select\">\r\n      </el-cascader>\r\n      <el-button  icon=\"el-icon-search\" @click=\"toSearch\"></el-button>\r\n    </div>\r\n    <div v-else-if=\"type==='kind'\" style=\"height: 100px\">\r\n      <el-select v-model=\"type\"  placeholder=\"请选择\" @change=\"search=''\" style=\"height:100px;width: 100px\">\r\n        <el-option label=\"标题\" value=\"title\"></el-option>\r\n        <el-option label=\"作者\" value=\"author\"></el-option>\r\n        <el-option label=\"关键词\" value=\"keywords\"></el-option>\r\n        <el-option label=\"学科\" value=\"subject\" @select=\"search=''\"></el-option>\r\n        <el-option label=\"类别\" value=\"kind\" @select=\"search=''\"></el-option>\r\n      </el-select>\r\n      <el-select v-model=\"search\" placeholder=\"请选择\" style=\"height:100px;\">\r\n        <el-option v-for=\"item in kinds\"\r\n                   :key=\"item.value\"\r\n                   :label=\"item.label\"\r\n                   :value=\"item.value\"></el-option>\r\n      </el-select>\r\n      <el-button  icon=\"el-icon-search\" @click=\"toSearch\" ></el-button>\r\n    </div>\r\n    <div v-else>\r\n      <el-input placeholder=\"请输入搜索内容\" v-model=\"search\" class=\"input-with-select\">\r\n        <el-select v-model=\"type\" slot=\"prepend\" @change=\"search=''\" placeholder=\"请选择\" style=\"width: 90px\">\r\n          <el-option label=\"标题\" value=\"title\"></el-option>\r\n          <el-option label=\"作者\" value=\"author\"></el-option>\r\n          <el-option label=\"关键词\" value=\"keywords\"></el-option>\r\n          <el-option label=\"学科\" value=\"subject\" ></el-option>\r\n          <el-option label=\"类别\" value=\"kind\" ></el-option>\r\n        </el-select>\r\n        <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"toSearch\"></el-button>\r\n      </el-input>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getSubjects,getKinds} from '@/api/api'\r\nimport {request} from \"@/network/request\"\r\nexport default {\r\n  name: \"MySearch\",\r\n  props: {\r\n    pEvent: String,\r\n  },\r\n    methods: {\r\n      toSearch() {\r\n        this.$emit('search', {type: this.type, value: this.search})\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        type:\"title\",\r\n        search:\"\",\r\n        subjects: this.$store.state.fields,\r\n        kinds: this.$store.state.kinds\r\n      }\r\n    },\r\n    beforeCreate() {\r\n      //获取类别\r\n      const config0 = {\r\n        url: getKinds,\r\n        method: 'get'\r\n      }\r\n      request(config0).then((data) => {\r\n        if (data.data.code === 0) {\r\n          this.kinds = []\r\n          for (let i of data.data.data) {\r\n            const class0 = {value: i.id, label: i.name}\r\n            this.kinds.push(class0)\r\n          }\r\n          this.$store.commit('setKinds', this.kinds)\r\n        } else {\r\n          alert(\"获取类别失败，请刷新重试\")\r\n        }\r\n      }).catch(() => {\r\n        alert(\"服务器开小差了，请刷新重试\")\r\n      })\r\n      const config1 = {\r\n        url: getSubjects,\r\n        method: 'get'\r\n      }\r\n      request(config1).then((data) => {\r\n        this.subjects = []\r\n        if (data.data.code === 0) {\r\n          for (let i of data.data.data) {\r\n            const subject = {\r\n              value: i.id,\r\n              label: i.name,\r\n              children: []\r\n            }\r\n            for (let j of i.subjects) {\r\n              const child = {\r\n                value: j.id,\r\n                label: j.name\r\n              }\r\n              subject.children.push(child)\r\n            }\r\n            this.subjects.push(subject)\r\n          }\r\n          this.$store.commit('setFields', this.subjects)\r\n        } else {\r\n          alert(\"获取学科失败，请刷新重试\")\r\n        }\r\n      }).catch(() => {\r\n        alert(\"服务器开小差了，请刷新重试\")\r\n      })\r\n    },\r\n    mounted() {\r\n      if(this.$route.path.indexOf(\"search\")>-1){\r\n        this.type=this.$route.params.type\r\n        if(this.type===\"subject\"){\r\n          this.search=this.$route.params.search.split(\",\")\r\n        }else if(this.type===\"kind\"){\r\n          this.search=[this.$route.params.search]\r\n        }else{\r\n          this.search=this.$route.params.search\r\n        }\r\n      }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.el-main[data-v-5c886d6e]{\r\n  line-height: 100px;\r\n}\r\n.el-select .el-input {\r\n  width: 130px;\r\n}\r\n.input-with-select .el-input-group__prepend {\r\n  background-color: #fff;\r\n}\r\n\r\n</style>"]}]}